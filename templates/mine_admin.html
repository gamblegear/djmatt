{% extends "bootstrap_base.html" %}
{% load url from future %}
{% load staticfiles %}

 {% block title %} Update User Info
{% endblock %} 

{% block script %}
<script src="{% static 'js/sprintf.min.js' %}"></script>

{% endblock %} 

{% block script_end_body %}
<script type="text/javascript">setNavActive("nav_2")</script>


<style type="text/css">
.mine {
	width:30px;
	height:30px;
}
/* This imageless css button was generated by CSSButtonGenerator.com */
</style>



<script>
function changeDeleteLink(game_id){
	//console.log(thread_id);
	$("#delete_btn").attr("href", "{% url 'mine.interact.delete_game_interact' 0 %}".replace("0", game_id))
}

function formatEditModal(game_id, name, rows, columns, groups_num, panels_per_group, wait_time, total_time, warning_time, switch_cost){
	$("#game_id").val(game_id)
	$("#name").val(name)
	$("#rows").val(rows)
	$("#columns").val(columns)
	$("#groups_num").val(groups_num)
	$("#panels_per_group").val(panels_per_group)
	$("#wait_time").val(wait_time)
	$("#total_time").val(total_time)
	$("#warning_time").val(warning_time)
	$("#switch_cost").val(switch_cost)
	
	
	$("#myModalLabel").html("Edit Game")
	
}

function formatAddModal(){
	$("#game_id").val(-1)
	$("#name").val("")
	$("#rows").val(25)
	$("#columns").val(25)
	$("#groups_num").val(3)
	$("#panels_per_group").val(3)
	$("#wait_time").val(10)
	$("#total_time").val(20)
	$("#warning_time").val(2)
	$("#switch_cost").val(2)
	
	$("#myModalLabel").html("Add New Game")
	
}
</script>
 
 			<!-- 
    id = models.AutoField(primary_key = True)
    name = models.CharField(max_length = 200)
    rows = models.IntegerField(default=0)
    columns = models.IntegerField(default=0)
    groups_num = models.IntegerField(default=0)
    panels_per_group = models.IntegerField(default=0)
    wait_time = models.IntegerField(default=0)
    
     -->
 
{% endblock %} {% block body %}

<h1>Admin: </h1>
<hr />
<a href="#Modal"  role="button" class="btn" data-toggle="modal" onclick="formatAddModal()">Add Game</a>
<br/>
<div class="container">

{% for game in game_list %}
    	
    	<div>
		<h3>Game : 
			<a href="#"><span style="color:blue">{{ game.name }}</span></a>
			{% if game.is_activated %}
				<span style="color:green">(Activated)</span>
			{% else %}
				<span style="color:gray">(Deactivated)</span>
			{% endif %}
			<span style="color:green; margin-left:20px; font-size:13px">Created time: {{game.create_time}} </span>
			
			<span style="margin-left:20px;"><a href="{% url 'mine.interact.download_log_interact' game.id %}"> Download Log</a></span>
		</h3>
		{% if game.is_activated %}
			<a href="#" role="button" class="btn btn-inverse" data-toggle="modal" style="margin-right:30px" disabled='disabled' >De-active</a>
		{% else %}
			<a href="{% url 'mine.interact.active_game_interact' game.id %}" role="button" class="btn btn-success" data-toggle="modal" style="margin-right:30px" >Active</a>
		{% endif %}
		
		
		
		
		<a href="#Modal" role="button" class="btn btn-info" data-toggle="modal" style="margin-right:30px" 
		onclick="formatEditModal( {{game.id}}, '{{game.name}}', {{game.rows}}, {{game.columns}}, {{game.groups_num}}, {{game.panels_per_group}}, {{game.wait_time}}, {{game.total_time}}, {{game.warning_time}}, {{game.switch_cost}} )"> 
		
		Edit</a>
		<a href="#delete_Modal" role="button" class="btn btn-danger" data-toggle="modal" style="margin-right:30px" onclick="changeDeleteLink({{game.id}})">Delete</a>
		
		<div id="thread_table_{{ futhread_id }}" style="margin-bottom:40px; margin-top:10px; width:90%"></div>
		<hr />

		 
		</div>
{% endfor %}

</div>


<div id="Modal" class="modal hide fade" role="dialog"
	aria-labelledby="myModalLabel" aria-hidden="true" style="position:absolute;">
	<div class="modal-header">
		<p></p>
		<button type="button" class="close" data-dismiss="modal"
			aria-hidden="true">×</button>
		<h3 id="myModalLabel">Add New Game</h3>
	</div>
	<div class="modal-body" style=" max-height: 800px;">
		<form class="form-horizontal"  action="{% url 'mine.interact.add_update_game_interact' %}" method="post">
		{% csrf_token %}
		<input type="hidden" id="game_id" name='game_id' value="-1">
		
			<div class="control-group" >
				<label class="control-label" for="name">Name:</label>
				<div class="controls">
					<input type="text" id="name" name="name" placeholder='Name'/>
				</div>
			</div>
			
			<div class="control-group">
				<label class="control-label" for="name">Waiting time (seconds):</label>
				<div class="controls">
					<input type="number" id="wait_time" name="wait_time" value="10"/>
				</div>
			</div>
			
			<div class="control-group">
				<label class="control-label" for="name">Number of Rows:</label>
				<div class="controls">
					<input type="number" id="rows" name="rows" value="25"/>
				</div>
			</div>
			
			<div class="control-group">
				<label class="control-label" for="name">Number of Columns:</label>
				<div class="controls">
					<input type="number" id="columns" name="columns" value="25"/>
				</div>
			</div>
			
			<div class="control-group">
				<label class="control-label" for="name">Number of Groups:</label>
				<div class="controls">
					<input type="number" id="groups_num" name="groups_num" value="3"/>
				</div>
			</div>
			
			<div class="control-group">
				<label class="control-label" for="panels_per_group">People per Group:</label>
				<div class="controls">
					<input type="number" id="panels_per_group" name="panels_per_group" value="3"/>
				</div>
			</div>
			
			<div class="control-group">
				<label class="control-label" for="total_time">Total time (min):</label>
				<div class="controls">
					<input type="number" id="total_time" name="total_time" value="20"/>
				</div>
			</div>
			
			<div class="control-group">
				<label class="control-label" for="panels_per_group">Warning time (min):</label>
				<div class="controls">
					<input type="number" id="warning_time" name="warning_time" value="2"/>
				</div>
			</div>
			
			<div class="control-group">
				<label class="control-label" for="switch_cost">Switch cost (block):</label>
				<div class="controls">
					<input type="number" id="switch_cost" name="switch_cost" value="2"/>
				</div>
			</div>


			<div class="modal-footer" >
				<button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
				<button class="btn btn-primary" type="submit" >Submit </button>
			</div>
		</form>
		
	</div>
	
</div>

<div id="delete_Modal" class="modal hide fade" tabindex="-1" role="dialog"
	aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-header">
		<p></p>
		<button type="button" class="close" data-dismiss="modal"
			aria-hidden="true">×</button>
		<h3 id="myModalLabel">Delete Confirm </h3>
	</div>
	<div class="modal-body">
	
		<p class="text-error" style="font-size:23px; line-height:150%">
		All information about this Game will be deleted! 
		<br />
		It will be PERMANENTLY lost!</p>
			<div class="modal-footer" >
				<button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>
				<a href="" class="btn btn-danger" id="delete_btn">Delete</a>
			</div>
		
	</div>
	
</div>

{% endblock %}



